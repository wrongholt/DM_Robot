import { UserInputHelper } from './../../../importPlugins/userInputHelper';
import { UserInput, Slot } from './../../../aceEntities/interfaces';
import { strict as assert } from 'assert';

describe("User Input Helper Test", function () {
    it("getters and setters sanity test", async function () {
        const testUserInput: UserInput = {
            intent: "something",
            slots: [
                {
                    name: "slotName",
                    value: "value"
                }
            ],
            value: "raw value"
        };
        const inputHelper = new UserInputHelper(testUserInput);

        assert.equal(inputHelper.getInputIntent(), testUserInput.intent);
        assert.deepEqual(inputHelper.getInputSlots(), testUserInput.slots);
        assert.equal(inputHelper.getInputValue(), testUserInput.value);
        assert.equal(inputHelper.getHandlerInput(), testUserInput.handlerInput);
        assert.deepEqual(inputHelper.getUserInput(), testUserInput);

        const newIntent: string = 'new intent';
        const newSlots: Slot[] = [{
            name: "newSlotName",
            value: "new value"
        }];
        const newValue: string = "new raw value";
        const addingSlot: Slot = {
            name: "addingSlotName",
            value: "adding value"
        }

        inputHelper.setInputIntent(newIntent);
        inputHelper.setInputSlots(newSlots);
        inputHelper.setInputValue(newValue);

        assert.equal(inputHelper.getInputIntent(), newIntent);
        assert.deepEqual(inputHelper.getInputSlots(), newSlots);
        assert.equal(inputHelper.getInputValue(), newValue);

        inputHelper.clearUserInput();
        assert.deepEqual(inputHelper.getUserInput(), {});

        inputHelper.addInputSlot(addingSlot.name, addingSlot.value);
        assert.deepEqual(inputHelper.getInputSlots(), [addingSlot]);
    });
});